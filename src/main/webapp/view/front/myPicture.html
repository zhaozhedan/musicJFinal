<!DOCTYPE html>
<html lang="en" class="app">
<head>
<meta charset="utf-8" />
<title>Music</title>
<meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav" />
<link rel="stylesheet" href="/musicJFinal/js/jPlayer/jplayer.flat.css" type="text/css" />
<link rel="stylesheet" href="/musicJFinal/css/app.v1.css" type="text/css" />
<!--[if lt IE 9]> <script src="js/ie/html5shiv.js"></script> <script src="js/ie/respond.min.js"></script> <script src="js/ie/excanvas.js"></script> <![endif]-->
</head>
<body class="">
<section class="vbox">
  <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">
    <div class="navbar-header aside bg-info nav-xs"> 
      <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html"><i class="icon-list"></i> </a> 
      <a href="/musicJFinal/" class="navbar-brand text-lt"> <i class="icon-earphones"></i> <img src="/musicJFinal/images/logo.png" alt="." class="hide"> <span class="hidden-nav-xs m-l-sm">原创音乐</span> </a> <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user"> <i class="icon-settings"></i> </a>
    </div>
    <ul class="nav navbar-nav hidden-xs">
      <li> <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted"> <i class="fa fa-indent text"></i> <i class="fa fa-dedent text-active"></i> </a> </li>
    </ul>
    <form class="navbar-form navbar-left input-s-lg m-t m-l-n-xs hidden-xs" role="search">
      <div class="form-group">
        <div class="input-group"> <span class="input-group-btn">
          <button type="submit" class="btn btn-sm bg-white btn-icon rounded"><i class="fa fa-search"></i></button>
          </span>
          <input type="text" class="form-control input-sm no-border rounded" placeholder="搜索音乐">
        </div>
      </div>
    </form>
    <div class="navbar-right ">
      <ul class="nav navbar-nav m-n hidden-xs nav-user user">
        <li class="dropdown"> 
          <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown"> <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm"> <img src="/musicJFinal/images/a0.png" alt="..."> </span> John.Smith <b class="caret"></b> </a>
          <ul class="dropdown-menu animated fadeInRight">
            <li> <span class="arrow top"></span> <a href="#">修改基本信息</a> </li>
            <li> <a href="/musicJFinal/myHome">我的主页</a></li>
           <!--  <li> <a href="#"> <span class="badge bg-danger pull-right">3</span> Notifications </a> </li>
            <li> <a href="docs.html">Help</a> </li> -->
            <li class="divider"></li>
            <li> <a href="modal.lockme.html" data-toggle="ajaxModal" >退出</a> </li>
          </ul>
        </li>
      </ul>
    </div>
  </header>
  <section>
    <section class="hbox stretch"> 
      <!-- .aside -->
      <aside class="bg-black dk nav-xs aside hidden-print" id="nav">
        <section class="vbox">
          <section class="w-f-md scrollable">
            <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="10px" data-railOpacity="0.2"> <!-- nav -->
              <nav class="nav-primary hidden-xs">
                <ul class="nav bg clearfix">
                  <li class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted"></li>
                  <li> <a href="/musicJFinal/"> <i class="icon-disc icon text-success"></i> <span class="font-bold">推荐</span> </a> </li>
                  <li> <a href="/musicJFinal/genres"> <i class="icon-music-tone-alt icon text-info"></i> <span class="font-bold">分类</span> </a> </li>
                  <li> <a href="/musicJFinal/eCard"> <i class="icon-drawer icon text-primary-lter"></i> <b class="badge bg-primary pull-right">6</b> 
                    <span class="font-bold">电子名片</span> </a> 
                  </li>
                  <li class="m-b hidden-nav-xs"></li>
                </ul>
              </nav>
              <!-- / nav --> </div>
          </section>
          <footer class="footer hidden-xs no-padder text-center-nav-xs">
            <div class="bg hidden-xs ">
              <div class="dropdown dropup wrapper-sm clearfix"> <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span class="thumb-sm avatar pull-left m-l-xs"> <img src="/musicJFinal/images/a3.png" class="dker" alt="..."> <i class="on b-black"></i> </span> <span class="hidden-nav-xs clear"> <span class="block m-l"> <strong class="font-bold text-lt">John.Smith</strong> <b class="caret"></b> </span> <span class="text-muted text-xs block m-l">Art Director</span> </span> </a>
              </div>
            </div>
          </footer>
        </section>
      </aside>
      <!-- /.aside -->
      <section id="content">
        <section class="vbox">
          <section class="scrollable">
            <div id="masonry" class="pos-rlt animated fadeInUpBig">
            <#list pictures as pic>
              <div class="item">
                <div class="item-overlay gd animated fadeInUp wrapper bg-info">
                  <div class="center text-center m-t-n"> <a href="#"><i class="icon-size-fullscreen i-2x"></i></a></div>
                </div>
                <div class="bottom gd bg-info wrapper">
                  <div class="m-t m-b"><a href="#" class="b-b b-info h4 text-u-c text-lt font-bold">${pic.title}</a></div>
                  <p class="hidden-xs">${pic.intro}</p>
                </div>
                <a href="#"><img src="${pic.url}" style="width:100%;height:100%" alt="" class="img-full"></a> 
               </div>
            </#list>
            </div>  
          </section>
        </section>
        <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open" data-target="#nav,html"></a> </section>
    </section>
  </section>
</section>
<!-- Bootstrap --> <!-- App --> 
<script src="/musicJFinal/js/app.v1.js"></script> 
<script src="/musicJFinal/js/masonry/tiles.min.js"></script> 
<script src="/musicJFinal/js/app.plugin.js"></script> 
<script type="text/javascript" src="/musicJFinal/js/jPlayer/jquery.jplayer.min.js"></script> 
<script type="text/javascript" src="/musicJFinal/js/jPlayer/add-on/jplayer.playlist.min.js"></script> 
<script type="text/javascript" src="/musicJFinal/js/jPlayer/demo.js"></script>
<script type="text/javascript">
$(function(){
	var titleIds=${titleIds};
	initContruct(titleIds);

});
 var initContruct=function (titleIds){
	 var TILE_IDS =titleIds;
     var rows;
     var rows_lg = [
       " A A B . . . ",
       " A A B . . C ",
       " . . . . D C ",
       " E E F F D . ",
       " . . F F . . ",
       " . G G . . . "
     ];
     var rows_sm = [
       " A A B . . ",
       " A A B . . ",
       " . C . . . ",
       " . C D E E ",
       " F F D . . ",
       " F F . . . ",
       " . G G . . ",
       " . . . . . "
     ];
     var rows_xs = [
       " A A B ",
       " A A B ",
       " . . . ",
       " . . C ",
       " . . C ",
       " . . D ",
       " E E D ",
       " F F . ",
       " F F . ",
       " . . . ",
       " . G G ",
       " . . . "
     ];

     var el = $('#masonry'),
     grid = new Tiles.Grid(el);
     grid.cellPadding = 0;
     grid.animationDuration = 0;

     grid.resizeColumns = function() {
         return this.template.numCols;
     };
     grid.numCols = function() {
         return this.template.numRows;
     };

     grid.createTile = function(tileId) {
         var tile = new Tiles.Tile(tileId);
         tile.$el.attr('tile-id', tileId).addClass('pos-abt').append($( " > .item:first", el ));
         return tile;
     };

     // get the rows json for different screen
     var $window = $(window);
     var getRows = function(){
       var $rows;
       $window.width() < 768 && ($rows = rows_xs);
       $window.width() >= 768 && ($rows = rows_sm);
       $window.width() >= 992 && ($rows = rows_lg);
       return $rows;
     };

     grid.template = Tiles.Template.fromJSON(getRows());
     grid.isDirty = true;
     grid.resize();

     var ids = TILE_IDS.slice(0, grid.template.rects.length);
     grid.updateTiles(ids);
     grid.redraw(true);

     // set height on mobile
     var setHeight = function(){
       el.height('auto');
       $window.width() < 768 && el.height(grid.cellSize * grid.template.numRows);
     }
     setHeight();

     // resize the window
     var $resize, $width = $window.width();
     $window.resize(function() {
       if($width !== $window.width()){
         clearTimeout($resize);
         $resize = setTimeout(function(){      
           grid.template = Tiles.Template.fromJSON(getRows());
           grid.resize();
           grid.redraw(true);
           setHeight();
           $width = $window.width();
         }, 200);
       }
     });
 }
 </script>
</body>
</html>
